
- table: study
  with:
  - column: code
    type: text
  - identity: [code]
  - column: title
    type: text
  - column: closed
    type: boolean
  - data: |
      code,title,closed
      fos,Family Obesity Study,false
      asdl,Autism Spectrum Disorder Lab,false
      des,Dennis Exercise Study,false
      puis,Prometheus University Intelligence Study,true

- table: individual
  with:
  - column: code
    type: text
  - identity: [code]
  - column: sex
    type: [not-known, male, female, not-applicable]
  - link: mother
    to: individual
    required: false
  - link: father
    to: individual
    required: false
  - link: adopted_mother
    to: individual
    required: false
  - link: adopted_father
    to: individual
    required: false
  - data: ./deploy/individual.csv

- table: identity
  with:
  - link: individual
  - identity: [individual]
  - column: givenname
    type: text
    required: false
  - column: middle
    type: text
    required: false
  - column: surname
    type: text
    required: false
  - column: birthdate
    type: date
    required: false
  - column: notes
    type: text
    required: false
  - data: ./deploy/identity.csv

- table: case_type
  with:
  - column: code
    type: text
  - identity: [code]
  - link: study
    required: false
  - data: |
      code,study
      family,
      household,
      genetic-group,

- table: role
  with:
  - link: case_type
  - column: code
    type: text
  - identity: [case_type, code]
  - column: title
    type: text
  - column: singular
    type: boolean

- table: case
  with:
  - link: case_type
  - column: code
    type: text
  - identity: [case_type, code]
  - link: study
    required: false
  - data: ./deploy/case.csv

- table: participation
  with:
  - link: case
  - link: individual
  - identity: [case, individual]
  - link: role
    required: false
  - data: ./deploy/participation.csv

- table: sample_type
  with:
  - column: code
    type: text
  - identity: [code]

- table: sample
  with:
  - link: individual
  - link: sample_type
  - column: code
    type: text
  - identity: [individual, sample_type, code]

- table: measure_type
  with:
  - column: code
    type: text
  - identity: [code]
  - column: title
    type: text

- table: measure_type_version
  with:
  - link: measure_type
  - column: version
    type: integer
  - identity: [measure_type, version]
  - column: json
    type: text

- table: measure
  with:
  - link: individual
  - link: measure_type_version
  - column: 'no'
    type: integer
  - identity: [individual, measure_type_version, 'no']
  - column: json
    type: text
    required: false
  - column: date_of_evaluation
    type: date
    required: false
  - column: age_at_evaluation
    type: integer
    required: false
  - column: data_entry_status
    type: [in-process, processed, completed]
  - column: last_modified
    type: datetime
    required: false
  - link: originating_study
    to: study
    required: false

- table: disorder_type
  with:
  - column: code
    type: text
  - identity: [code]
  - column: title
    type: text

- table: disorder
  with:
  - link: disorder_type
  - column: code
    type: text
  - identity: [disorder_type, code]
  - column: title
    type: text

- table: condition
  with:
  - link: individual
  - link: disorder_type
  - column: code
    type: text
  - identity: [individual, disorder_type, code]

- table: consent_type
  with:
  - column: code
    type: text
  - identity: [code]
  - column: title
    type: text
  - column: language
    type: text
    required: false
  - column: expires_in_month
    type: integer
    required: false

- table: consent
  with:
  - link: individual
  - link: consent_type
  - column: date_signed
    type: date
  - identity: [individual, consent_type, date_signed]
  - column: expires
    type: date
    required: false
  - column: status
    type: [confirmed, rejected, in-progress]

- table: consent_presented
  with:
  - link: individual
  - link: consent_type
  - column: date_signed
    type: date
  - identity: [individual, consent_type, date_signed]

- table: study_consent
  with:
  - link: study
  - link: consent_type
  - identity: [study, consent_type]

- table: visit
  with:
  - link: study
  - column: code
    type: text
  - identity: [study, code]
  - column: title
    type: text

- table: protocol
  with:
  - link: study
  - column: code
    type: text
  - identity: [study, code]
  - column: title
    type: text

- table: requirement_type
  with:
  - column: code
    type: text
  - identity: [code]

- table: requirement
  with:
  - link: protocol
  - link: requirement_type
  - column: code
    type: text
  - identity: [protocol, requirement_type, code]
  - column: title
    type: text
  - link: visit
    required: false
  - column: priority
    type: integer

- table: measure_requirement
  with:
  - link: requirement
  - link: measure_type
  - identity: [requirement, measure_type]

- table: protocol_participation
  with:
  - link: individual
  - link: protocol
  - column: code
    type: text
  - identity: [individual, protocol, code]
  - column: legacy_id
    type: text
    required: false

- table: todo
  with:
  - link: protocol_participation
  - column: code
    type: text
  - identity: [protocol_participation, code]
  - column: title
    type: text
  - column: status
    type: [not-started, complete, skipped]
  - link: requirement
    required: false

- table: measure_todo
  with:
  - link: todo
  - identity: [todo]

- table: staff
  with:
  - column: code
    type: text
  - identity: [code]

- table: appointment_type
  with:
  - column: code
    type: text
  - identity: [code]

- table: appointment
  with:
  - link: appointment_type
  - column: code
    type: text
  - identity: [appointment_type, code]
  - column: date
    type: date
  - column: start_time
    type: text
  - column: end_time
    type: text
  - column: outcome
    type: [scheduled, cancelled, rescheduled, held]
  - column: date_scheduled
    type: date
  - column: time_scheduled
    type: text

- table: individual_appointment
  with:
  - link: individual
  - link: appointment
  - identity: [individual, appointment]

- table: staff_appointment
  with:
  - link: staff
  - link: appointment
  - identity: [staff, appointment]
  - column: role
    type: text
    required: false

- table: requirement_appointment
  with:
  - link: todo
  - link: appointment
  - identity: [todo, appointment]

