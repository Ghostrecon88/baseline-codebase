#
# This file contains expected test output data generated by PBBT.
#
---
suite: rex.setup
tests:
- suite: install
  tests:
  - sh: virtualenv -q --system-site-packages --never-download ./sandbox
    stdout: ''
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./sandbox/src; cp -a ./demo ./sandbox/src/rex.setup_demo'
    stdout: ''
  - sh: ./bin/pip install -q ./src/rex.setup_demo
    stdout: ''
  - read: ./sandbox/lib/python2.7/site-packages/rex.setup_demo-2.0.0-py2.7.egg-info/rex_init.txt
    data: rex.setup_demo
  - read: ./sandbox/lib/python2.7/site-packages/rex.setup_demo-2.0.0-py2.7.egg-info/rex_static.txt
    data: /home/xi/xitology/prometheus/rex/opensource/rex.setup/sandbox/share/rex/rex.setup_demo
  - read: ./sandbox/lib/python2.7/site-packages/rex.setup_demo-2.0.0-py2.7.egg-info/rex_bundle.txt
    data: |
      {
        "./www/bootstrap": [
          "https://raw.github.com/twbs/bootstrap/v3.0.0/LICENSE#md5=e23fadd6ceef8c618fc1c65191d846fa",
          "https://github.com/twbs/bootstrap/releases/download/v3.0.0/bootstrap-3.0.0-dist.zip#md5=6b17c05bb1a1ddb123b7cadea187ff68"
        ],
        "./www/bundle": [
          "webpack:"
        ],
        "./www/jquery": [
          "https://raw.github.com/jquery/jquery/1.10.2/MIT-LICENSE.txt#md5=e43aa437a6a1ba421653bd5034333bf9",
          "http://code.jquery.com/jquery-1.10.2.js#md5=91515770ce8c55de23b306444d8ea998",
          "http://code.jquery.com/jquery-1.10.2.min.js#md5=628072e7212db1e8cdacb22b21752cda",
          "http://code.jquery.com/jquery-1.10.2.min.map#md5=6c3ccfc221d36777d383b6e04d0b8af9"
        ]
      }
  - sh: ls -R ./lib/python2.7/site-packages/rex
    stdout: |
      ./lib/python2.7/site-packages/rex:
      setup_demo.py
      setup_demo.pyc
  - sh: ls ./share/rex
    stdout: |
      rex.setup_demo
  - sh: ls ./share/rex/rex.setup_demo
    stdout: |
      js
      www
  - sh: ls ./share/rex/rex.setup_demo/js
    stdout: |
      bower.json
      bower_components
      lib
  - sh: ls ./share/rex/rex.setup_demo/js/bower_components
    stdout: |
      bootstrap
      jquery
      rex-setup-demo
- suite: develop
  tests:
  - sh: virtualenv -q --system-site-packages --never-download ./sandbox
    stdout: ''
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./sandbox/src; cp -a ./demo ./sandbox/src/rex.setup_demo'
    stdout: ''
  - sh: ./bin/pip install -q -e ./src/rex.setup_demo
    stdout: ''
  - read: ./sandbox/src/rex.setup_demo/src/rex.setup_demo.egg-info/rex_init.txt
    data: rex.setup_demo
  - read: ./sandbox/src/rex.setup_demo/src/rex.setup_demo.egg-info/rex_static.txt
    data: /home/xi/xitology/prometheus/rex/rex.setup-opensource/sandbox/share/rex/rex.setup_demo
  - sh: ls ./share/rex
    stdout: |
      rex.setup_demo
  - sh: ls ./share/rex/rex.setup_demo
    stdout: |
      js
      www
  - sh: ls ./share/rex/rex.setup_demo/js
    stdout: |
      bower.json
      bower_components
      lib
  - sh: ls ./share/rex/rex.setup_demo/js/bower_components
    stdout: |
      bootstrap
      jquery
      rex-setup-demo
- suite: sdist
  tests:
  - sh: virtualenv -q --system-site-packages --never-download ./sandbox
    stdout: ''
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./sandbox/src; cp -a ./demo ./sandbox/src/rex.setup_demo'
    stdout: ''
  - sh: ../../bin/python setup.py -q sdist --format=zip
    stdout: ''
  - sh: unzip -q ./src/rex.setup_demo/dist/rex.setup_demo-2.0.0.zip
    stdout: ''
  - sh: ls -R ./rex.setup_demo-2.0.0
    stdout: |
      ./rex.setup_demo-2.0.0:
      PKG-INFO
      README
      setup.cfg
      setup.py
      src
      static

      ./rex.setup_demo-2.0.0/src:
      rex
      rex.setup_demo.egg-info

      ./rex.setup_demo-2.0.0/src/rex:
      __init__.py
      setup_demo.py

      ./rex.setup_demo-2.0.0/src/rex.setup_demo.egg-info:
      PKG-INFO
      SOURCES.txt
      dependency_links.txt
      namespace_packages.txt
      rex_bundle.txt
      rex_init.txt
      rex_static.txt
      top_level.txt

      ./rex.setup_demo-2.0.0/static:
      js
      www

      ./rex.setup_demo-2.0.0/static/js:
      bower.json
      lib

      ./rex.setup_demo-2.0.0/static/js/lib:
      index.js
      index.less

      ./rex.setup_demo-2.0.0/static/www:
      _access.yaml
      bootstrap
      bundle
      index.html
      jquery

      ./rex.setup_demo-2.0.0/static/www/bootstrap:
      LICENSE
      css
      fonts
      js

      ./rex.setup_demo-2.0.0/static/www/bootstrap/css:
      bootstrap-theme.css
      bootstrap-theme.min.css
      bootstrap.css
      bootstrap.min.css

      ./rex.setup_demo-2.0.0/static/www/bootstrap/fonts:
      glyphicons-halflings-regular.eot
      glyphicons-halflings-regular.svg
      glyphicons-halflings-regular.ttf
      glyphicons-halflings-regular.woff

      ./rex.setup_demo-2.0.0/static/www/bootstrap/js:
      bootstrap.js
      bootstrap.min.js

      ./rex.setup_demo-2.0.0/static/www/bundle:
      bundle.css
      bundle.css.map
      bundle.js
      bundle.js.map
      font

      ./rex.setup_demo-2.0.0/static/www/bundle/font:
      68ed1dac06bf0409c18ae7bc62889170.woff
      7ad17c6085dee9a33787bac28fb23d46.eot
      e49d52e74b7689a0727def99da31f3eb.ttf
      ff423a4251cf2986555523dfe315c42b.svg

      ./rex.setup_demo-2.0.0/static/www/jquery:
      MIT-LICENSE.txt
      jquery-1.10.2.js
      jquery-1.10.2.min.js
      jquery-1.10.2.min.map
