context:
  application_name: Rex Widget Demo
  menu:
  - dashboard
  - forms
  - about

paths:

  /:
    widget: !<RexPage>
      id: dashboard
      title: Dashboard
      params:
        selected_study: study_list/selected
      navigation: !<Navigation>
      children: !<TwoColumnLayout>
        sidebar_width: 3
        sidebar:
          - !<Header> {text: Sidebar}
          - !<Filters>
            id: filters
            show_apply_button: true
            show_clear_button: true
            filters:
              - !<Filter>
                title: "Choose study to show by id:"
                filter: !<Select>
                  id: study_code
                  data:
                    url: rex.widget_demo:/data/study_options
              - !<Filter>
                title: "Choose study to show by another id:"
                filter: !<TextInput>
                  id: study_code_x

        main:
          - !<Header> Studies

          - !<Table>
            id: study_list
            selectable: true
            data:
              url: rex.widget_demo:/data/study
              refs:
                'study:id': filters/value:study_code
                'study:xid':
                  - filters/value:study_code_x
                  - filters/value:study_code
            columns:
              - key: code
                title: Code
              - key: title
                title: Title
              - key: closed
                title: Closed

          - !<StudyInfo>
            id: study
            data:
              url: rex.widget_demo:/data/study
              refs:
                'study:id': study_list/selected


  /forms:
    widget: !<RexPage>
      id: forms
      title: Forms
      navigation: !<Navigation>

  /about:
    widget: !<RexPage>
      id: about
      title: About
      navigation: !<Navigation>


  /data/study:
    port:
    - entity: study
      filters:
        - "id($code) := guard($code, code=$code)"
        - "xid($code) := guard($code, code=$code)"

  /data/study_options:
    port:
      - entity: study
        select: [title]
